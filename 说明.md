
###遇到的问题

#### 老版本
1. cant resolve './src'
    - 没有在package.json里指定config文件位置
    - 修复: npx webpack -c ./src/renderer/webpack.config.js
2. webpack 不停的提示 require is undefined
    - 因为在webpack.config.js里有electron相关的配置所以不行
    - 修复: 去掉webpack.config.js里关于electron的东西或改成vite
3. 运行electron时提示 mast use import to load es Module
    - 查看是不是在package.json里配置了"type": "module"
    - 修复: 去掉"type": "module"


##### 新版本(vite+typescript)
1. 使用typescript + electron 时提示不能用model
    - 因为electron没编译
    - 需要先build electron 再运行编译完了的东西 "electron ./dist/index.ts",
2. 在使用 /script/index.ts 时报To load an ES module, set "type": "module" in the package.json or use the .mjs extension. 错误
    - package.json里的 "start" 改成 "tsc ./script/index.ts" --- 这是手动编译并要手动去run /dist/index.js
    - 安装ts-node, 指定package.json里的script: "run_by_script": "ts-node ./script/index.ts"
3. vite.createServer() 跑起来页面显示加载失败(浏览器显示灰色错误页面)
        -- 检查 createServer()里的params的root地址对不对
4. Cannot read directory "node_modules/C:": The filename, directory name, or volume label syntax is incorrect.
    - 没解决, 突然就好了

5. 在改 /main.index.ts 时
    - 用 const alreadyHasAInstance = app.requestSingleInstanceLock() 时应用跑不起来了
       spawn 运行了但是窗口没拉起来
    - 改用最原始的 createWindow() 方法, 应该是判断实例时的业务逻辑有问题

###### 改进
- 用ts构建electron程序
    - https://davembush.medium.com/typescript-and-electron-the-right-way-141c2e15e4e1

##### ts

tsconfig 配置文档
   - https://www.typescriptlang.org/tsconfig

- 添加electron代码提示
   - 在 tsconfig.json里写入`"types": ["electron" ]`

###### eslint

- eslint 配置文档
   - https://eslint.org/docs/user-guide/configuring/

- vue的eslint
   - 官方的vue-eslint-parser并不好用,只能在启动时运行一次且无法接入hmr
   - 使用ehutch79/vite-eslint库该方法解决

- 提示找不到require, process
   - 在 eslintrc.js 里添加 env : { node : true },

##### 项目说明及其他技巧, 问题
1. 模拟崩溃
    - process.crash()

2. vue-dev-tools 失效问题
    - 去掉 index.ts 里的`app.commandLine.appendSwitch('--disable-site-isolation-trials')` 这一行就好了


搭建框架的教程源码 (webpack vue3 electron) https://github.com/nofacer/vue3-electron


###todo
环境变量

